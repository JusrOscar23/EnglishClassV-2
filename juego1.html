!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Class - Juego de Memoria Mejorado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3a0ca3;
      --accent-color: #f72585;
      --light-color: #ffffff;
      --text-color: #2b2d42;
      --fun-color: #4cc9f0;
      --success-color: #10b981;
      --danger-color: #ef4444;
    }
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      background: #f0f4f8;
    }
    
   .memory-card {
    perspective: 100px;
    padding: 10px;
    width: 100px;
    height: 200px;
    }
    
    .memory-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .memory-card.flip .memory-card-inner {
      transform: rotateY(180deg);
    }
    
    .front-face, .back-face {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 15px;
      text-align: center;
    }
    
    .front-face {
      transform: rotateY(180deg);
      background: linear-gradient(45deg, var(--primary-color), var(--fun-color));
      color: white;
    }
    
    .front-face .word {
      font-size: 1.2rem;
      margin-bottom: 8px;
      font-weight: bold;
    }
    
    .front-face .translation {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 8px;
    }
    
    .front-face .emoji {
      font-size: 1.8rem;
    }
    
    .back-face {
      background: white;
      color: var(--secondary-color);
      border: 3px solid var(--fun-color);
    }
    
    .back-face .question {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--secondary-color);
    }
    
    .back-face .hint-text {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    
    .celebration h2 {
        animation: bounce 1.5s infinite;
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: var(--accent-color);
      animation: confetti-fall 5s linear forwards;
      border-radius: 50%;
    }
    
    @keyframes confetti-fall {
      to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    .game-btn {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      font-family: 'Poppins', sans-serif;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .game-btn:hover {
      background-color: var(--secondary-color);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(58, 12, 163, 0.3);
    }
    
    .game-btn.secondary {
      background-color: var(--fun-color);
    }
    
    .game-btn.secondary:hover {
      background-color: #3a0ca3;
    }
    
    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.85);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      display: none;
    }
    
    .hints-container {
      background-color: #f0f8ff;
      border-radius: 10px;
      padding: 1.5rem;
      margin: 2rem 0;
      border: 2px dashed var(--primary-color);
    }
    
    .hints-container h3 {
      color: var(--secondary-color);
      margin-bottom: 1rem;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .hints-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(2004px, 1fr));
      gap: 10px;
    }
    
    .hint-item {
      background-color: white;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }
    
    .hint-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.15);
    }
    
    .hint-item i {
      color: var(--fun-color);
      margin-right: 8px;
    }
    
    .start-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(67, 97, 238, 0.9), rgba(76, 201, 240, 0.9));
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      text-align: center;
      padding: 20px;
    }
    
    .start-screen h2 {
      color: white;
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .start-screen p {
      color: white;
      font-size: 1.2rem;
      max-width: 600px;
      margin-bottom: 2rem;
    }
    
    .start-btn {
      background-color: var(--accent-color);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.5rem;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      margin: 10px;
    }
    
    .start-btn:hover {
      background-color: #ff0676;
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }
    
    .index-btn {
      background-color: var(--fun-color);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 20px;
      transition: all 0.3s;
    }
    
    .index-btn:hover {
      background-color: #3a0ca3;
      transform: translateY(-3px);
    }
    
    .category-selector {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .category-btn {
      padding: 10px 20px;
      border: 2px solid var(--primary-color);
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
      background-color: white;
      color: var(--primary-color);
    }
    
    .category-btn.active {
      background-color: var(--primary-color);
      color: white;
    }
    
    .difficulty-selector {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .difficulty-btn {
      padding: 8px 20px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }
    
    .difficulty-btn.easy {
      background-color: var(--success-color);
      color: white;
    }
    
    .difficulty-btn.medium {
      background-color: #ff9800;
      color: white;
    }
    
    .difficulty-btn.hard {
      background-color: var(--accent-color);
      color: white;
    }
    
    .difficulty-btn.active {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .tutorial-container {
      background-color: #fff9e6;
      border-radius: 10px;
      padding: 15px;
      margin: 20px 0;
      border-left: 4px solid #ff9800;
    }
    
    .tutorial-container h4 {
      color: #ff9800;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    @media (max-width: 768px) {
      .memory-game {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .front-face, .back-face {
        font-size: 1rem;
      }
      
      .front-face .word {
        font-size: 1.1rem;
      }
      
      .hints-list {
        grid-template-columns: 1fr;
      }
      
      .start-screen h2 {
        font-size: 2rem;
      }
    }
    
    @media (max-width: 480px) {
      .memory-game {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .game-controls {
        flex-direction: column;
        align-items: center;
      }
      
      .game-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body class="flex flex-col items-center justify-start min-h-screen p-4 bg-slate-100">

  <!-- Pantalla de inicio -->
  <div class="start-screen" id="startScreen">
    <h2>¬°Bienvenido al Juego de Memoria de Ingl√©s Mejorado!</h2>
    <p>Aprende ingl√©s de forma divertida con nuestro juego de memoria interactivo. Encuentra las parejas, escucha la pronunciaci√≥n y ampl√≠a tu vocabulario.</p>
    
    <div class="category-selector">
      <button class="category-btn active" data-category="basic">B√°sico</button>
      <button class="category-btn" data-category="food">Comida</button>
      <button class="category-btn" data-category="animals">Animales</button>
      <button class="category-btn" data-category="travel">Viajes</button>
    </div>
    
    <div class="difficulty-selector">
      <button class="difficulty-btn easy active" data-difficulty="easy">F√°cil</button>
      <button class="difficulty-btn medium" data-difficulty="medium">Medio</button>
      <button class="difficulty-btn hard" data-difficulty="hard">Dif√≠cil</button>
    </div>
    
    <button class="start-btn" id="startButton"><i class="fas fa-play"></i> EMPEZAR</button>
    <button class="index-btn" id="indexButton"><i class="fas fa-home"></i> Inicio</button>
  </div>

  <div class="w-full max-w-5xl">
      <header class="py-4">
          <a href="games.html" class="inline-flex items-center gap-2 text-slate-600 hover:text-indigo-700 transition-colors duration-300 group">
              <div class="bg-white group-hover:bg-indigo-100 rounded-full p-2 transition-colors duration-300 shadow-sm border border-slate-200">
                  <svg class="h-5 w-5 text-slate-500 group-hover:text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                  </svg>
              </div>
              <span class="font-medium">Volver a juegos</span>
          </a>
      </header>
  </div>

  <main class="container w-full max-w-5xl mx-auto p-4 md:p-8 bg-white rounded-2xl shadow-xl">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-indigo-800">Ingl√©s Interactivo</h1>
      <p class="text-slate-500 mt-2">üéÆ Juego de Memoria: Aprende Ingl√©s Divirti√©ndote</p>
      <p class="text-slate-400">Encuentra las parejas de palabras en ingl√©s y espa√±ol. ¬°Haz clic en el icono de sonido para escuchar la pronunciaci√≥n!</p>
    </div>
    
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-6">
      <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-check-circle text-green-500"></i> Pares: <span id="pairs" class="font-bold">0</span>/8</div>
      <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-redo text-blue-500"></i> Intentos: <span id="attempts" class="font-bold">0</span></div>
      <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-clock text-purple-500"></i> Tiempo: <span id="time" class="font-bold">00:00</span></div>
      <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-star text-yellow-500"></i> Puntuaci√≥n: <span id="score" class="font-bold">0</span></div>
    </div>
    
    <div class="w-full bg-slate-200 rounded-full h-2.5 mb-6">
      <div id="progress" class="bg-indigo-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
    </div>
    
    <div class="bg-indigo-50 border-l-4 border-indigo-500 text-indigo-800 p-4 rounded-md mb-8">
      <div class="flex items-center justify-center gap-4">
        <div class="py-1"><i class="fas fa-bullhorn text-2xl"></i></div>
        <div>
          <p class="font-bold">Practica la pronunciaci√≥n</p>
          <p>La palabra actual es: <span id="current-word" class="font-semibold">Hello</span></p>
        </div>
        <button class="pronounce-btn bg-indigo-500 text-white rounded-full p-3 hover:bg-indigo-600 transition" id="pronounceBtn">
          <i class="fas fa-volume-up"></i>
        </button>
      </div>
    </div>
    
    <div class="memory-game grid grid-cols-4 gap-4 mb-8" id="memory-game">
      <!-- Las cartas se generar√°n con JavaScript -->
    </div>
    
    <div class="tutorial-container">
      <h4><i class="fas fa-lightbulb"></i> Consejo de aprendizaje</h4>
      <p id="learning-tip">Intenta repetir en voz alta cada palabra que encuentres. Esto te ayudar√° a memorizar mejor el vocabulario.</p>
    </div>
    
    <div class="hints-container">
      <h3><i class="fas fa-graduation-cap"></i> Pistas de Vocabulario</h3>
      <div class="hints-list" id="hints-list">
        <!-- Las pistas se generar√°n con JavaScript -->
      </div>
    </div>
    
    <div class="flex justify-center flex-wrap gap-4">
      <button class="game-btn bg-indigo-600 text-white" id="newGameBtn"><i class="fas fa-sync-alt"></i> Nuevo Juego</button>
      <button class="game-btn bg-amber-500 text-white" id="hintBtn"><i class="fas fa-lightbulb"></i> Pista</button>
      <button class="game-btn bg-teal-500 text-white" id="soundBtn"><i class="fas fa-volume-up"></i> Sonido: ON</button>
      <button class="game-btn bg-rose-500 text-white" id="voiceBtn"><i class="fas fa-microphone"></i> Activar Voz</button>
      <button class="game-btn secondary" id="flashcardBtn"><i class="fas fa-images"></i> Modo Flashcards</button>
    </div>
  </main>
  
  <div class="celebration fixed inset-0 bg-black bg-opacity-80 flex-col items-center justify-center z-50 hidden" id="celebration">
    <h2 class="text-white text-4xl md:text-6xl font-bold mb-8 text-center">¬°Felicidades! üéâ<br>Completaste el juego</h2>
    
    <div class="celebration-stats bg-white p-6 rounded-2xl shadow-lg mb-8 text-center">
      <h3 class="text-2xl font-bold text-indigo-800 mb-4">Tu resultado</h3>
      <div class="grid grid-cols-2 gap-4">
        <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-check-circle text-green-500"></i> Pares: <span id="celeb-pairs" class="font-bold">8</span>/8</div>
        <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-redo text-blue-500"></i> Intentos: <span id="celeb-attempts" class="font-bold">0</span></div>
        <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-clock text-purple-500"></i> Tiempo: <span id="celeb-time" class="font-bold">00:00</span></div>
        <div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-star text-yellow-500"></i> Puntuaci√≥n: <span id="celeb-score" class="font-bold">0</span></div>
      </div>
    </div>
    
    <button class="game-btn bg-green-500 text-white text-xl" id="playAgainBtn"><i class="fas fa-play"></i> Jugar de nuevo</button>
  </div>

  <!-- Sonidos -->
  <audio id="flipSound" src="https://www.soundjay.com/human/sounds/card-flip-01.mp3"></audio>
  <audio id="matchSound" src="https://www.soundjay.com/buttons/sounds/button-21.mp3"></audio>
  <audio id="winSound" src="https://www.soundjay.com/human/sounds/applause-01.mp3"></audio>
  <audio id="hintSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>
  <audio id="startSound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3"></audio>
  <audio id="voiceSound" src="https://www.soundjay.com/human/sounds/game-start-01.mp3"></audio>
  <audio id="beginSound" src="https://www.soundjay.com/human/sounds/lets-play-01.mp3"></audio>
  <audio id="correctSound" src="https://www.soundjay.com/buttons/sounds/button-09.mp3"></audio>
  <audio id="incorrectSound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3"></audio>

  <script>
    // Variables del juego
    let hasFlippedCard = false;
    let lockBoard = false;
    let firstCard, secondCard;
    let pairsMatched = 0;
    let attempts = 0;
    let seconds = 0;
    let timer;
    let soundOn = true;
    let score = 0;
    let currentCategory = 'basic';
    let currentDifficulty = 'easy';
    let voiceRecognition;
    
    // Bancos de palabras por categor√≠a
    const wordBanks = {
      basic: [
        { word: "Hello", translation: "Hola", emoji: "üëã", hint: "Saludo com√∫n", pronunciation: "heÀàlo ä" },
        { word: "Goodbye", translation: "Adi√≥s", emoji: "üëã", hint: "Despedida", pronunciation: "…° ädÀàba…™" },
        { word: "Thank you", translation: "Gracias", emoji: "üôè", hint: "Expresi√≥n de gratitud", pronunciation: "Œ∏√¶≈ãk ju" },
        { word: "Please", translation: "Por favor", emoji: "ü•∫", hint: "Palabra m√°gica para pedir algo", pronunciation: "pliÀêz" },
        { word: "Sorry", translation: "Lo siento", emoji: "üòî", hint: "Pedir disculpas", pronunciation: "Ààs…íri" },
        { word: "Friend", translation: "Amigo", emoji: "üë´", hint: "Persona cercana", pronunciation: "frend" },
        { word: "Family", translation: "Familia", emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", hint: "Padres, hermanos, etc.", pronunciation: "Ààf√¶m…ôli" },
        { word: "Love", translation: "Amor", emoji: "‚ù§Ô∏è", hint: "Sentimiento fuerte", pronunciation: "l åv" },
        { word: "School", translation: "Escuela", emoji: "üè´", hint: "Lugar de aprendizaje", pronunciation: "skuÀêl" },
        { word: "Book", translation: "Libro", emoji: "üìñ", hint: "Contiene p√°ginas para leer", pronunciation: "b äk" },
        { word: "Teacher", translation: "Profesor", emoji: "üë©‚Äçüè´", hint: "Persona que ense√±a", pronunciation: "ÀàtiÀêt É…ôr" },
        { word: "Student", translation: "Estudiante", emoji: "üßë‚Äçüéì", hint: "Persona que aprende", pronunciation: "ÀàstuÀêd…ônt" }
      ],
      food: [
        { word: "Apple", translation: "Manzana", emoji: "üçé", hint: "Fruta roja o verde", pronunciation: "Àà√¶p…ôl" },
        { word: "Banana", translation: "Pl√°tano", emoji: "üçå", hint: "Fruta amarilla alargada", pronunciation: "b…ôÀàn√¶n…ô" },
        { word: "Water", translation: "Agua", emoji: "üíß", hint: "L√≠quido vital", pronunciation: "Ààw…îÀêt…ôr" },
        { word: "Bread", translation: "Pan", emoji: "üçû", hint: "Alimento hecho con harina", pronunciation: "bred" },
        { word: "Cheese", translation: "Queso", emoji: "üßÄ", hint: "Producto l√°cteo", pronunciation: "t ÉiÀêz" },
        { word: "Coffee", translation: "Caf√©", emoji: "‚òï", hint: "Bebida estimulante", pronunciation: "Ààk…ífi" },
        { word: "Orange", translation: "Naranja", emoji: "üçä", hint: "Fruta c√≠trica", pronunciation: "Àà…ír…™nd í" },
        { word: "Pizza", translation: "Pizza", emoji: "üçï", hint: "Comida italiana con base redonda", pronunciation: "ÀàpiÀêts…ô" }
      ],
      animals: [
        { word: "Dog", translation: "Perro", emoji: "üêï", hint: "Mejor amigo del hombre", pronunciation: "d…í…°" },
        { word: "Cat", translation: "Gato", emoji: "üêà", hint: "Animal independiente", pronunciation: "k√¶t" },
        { word: "Bird", translation: "P√°jaro", emoji: "üê¶", hint: "Animal que vuela", pronunciation: "b…úÀêd" },
        { word: "Fish", translation: "Pez", emoji: "üêü", hint: "Animal acu√°tico", pronunciation: "f…™ É" },
        { word: "Lion", translation: "Le√≥n", emoji: "ü¶Å", hint: "Rey de la selva", pronunciation: "Ààla…™…ôn" },
        { word: "Elephant", translation: "Elefante", emoji: "üêò", hint: "Animal con trompa", pronunciation: "Ààel…™f…ônt" },
        { word: "Monkey", translation: "Mono", emoji: "üêí", hint: "Animal trepador", pronunciation: "Ààm å≈ãki" },
        { word: "Horse", translation: "Caballo", emoji: "üê¥", hint: "Animal que galopa", pronunciation: "h…îÀês" }
      ],
      travel: [
          { word: "Airplane", translation: "Avi√≥n", emoji: "‚úàÔ∏è", hint: "Medio de transporte a√©reo", pronunciation: "Ààe…ôple…™n" },
        { word: "Hotel", translation: "Hotel", emoji: "üè®", hint: "Lugar para alojarse", pronunciation: "ho äÀàtel" },
        { word: "Passport", translation: "Pasaporte", emoji: "üìò", hint: "Documento para viajar", pronunciation: "Ààp…ëÀêsp…îÀêt" },
        { word: "Beach", translation: "Playa", emoji: "üèñÔ∏è", hint: "Lugar con arena y mar", pronunciation: "biÀêt É" },
        { word: "Mountain", translation: "Monta√±a", emoji: "‚õ∞Ô∏è", hint: "Elevaci√≥n natural del terreno", pronunciation: "Ààma änt…ôn" },
        { word: "Taxi", translation: "Taxi", emoji: "üöï", hint: "Transporte p√∫blico", pronunciation: "Ààt√¶ksi" },
        { word: "Suitcase", translation: "Maleta", emoji: "üß≥", hint: "Para empacar tus cosas", pronunciation: "ÀàsuÀêtke…™s" },
        { word: "Ticket", translation: "Billete", emoji: "üé´", hint: "Para entrar o viajar", pronunciation: "Ààt…™k…™t" }
      ]
    };
    
    const learningTips = [
      "Intenta repetir en voz alta cada palabra que encuentres. Esto te ayudar√° a memorizar mejor el vocabulario.",
      "Asocia cada palabra con una imagen mental. Esto facilitar√° el recuerdo a largo plazo.",
      "Practica con frases completas, no solo con palabras sueltas. As√≠ aprender√°s a usarlas en contexto.",
      "Establece metas diarias de aprendizaje. Por ejemplo, aprender 5 palabras nuevas cada d√≠a.",
      "Escucha la pronunciaci√≥n nativa e intenta imitarla. Presta atenci√≥n a la entonaci√≥n y el acento.",
      "Usa las palabras nuevas en conversaciones o escribe frases con ellas. La pr√°ctica constante es clave."
    ];
    
    let currentCards = [];
    
    // Elementos del DOM
    const startScreen = document.getElementById('startScreen');
    const startButton = document.getElementById('startButton');
    const indexButton = document.getElementById('indexButton');
    const newGameBtn = document.getElementById('newGameBtn');
    const hintBtn = document.getElementById('hintBtn');
    const soundBtn = document.getElementById('soundBtn');
    const voiceBtn = document.getElementById('voiceBtn');
    const playAgainBtn = document.getElementById('playAgainBtn');
    const pronounceBtn = document.getElementById('pronounceBtn');
    const currentWordElement = document.getElementById('current-word');
    const progressBar = document.getElementById('progress');
    const scoreDisplay = document.getElementById('score');
    const learningTipElement = document.getElementById('learning-tip');
    const categoryButtons = document.querySelectorAll('.category-btn');
    const difficultyButtons = document.querySelectorAll('.difficulty-btn');
    const flashcardBtn = document.getElementById('flashcardBtn');

    // Event Listeners
    startButton.addEventListener('click', beginGame);
    indexButton.addEventListener('click', goToIndex);
    newGameBtn.addEventListener('click', startGame);
    hintBtn.addEventListener('click', showHint);
    soundBtn.addEventListener('click', toggleSound);
    voiceBtn.addEventListener('click', setupVoiceRecognition);
    playAgainBtn.addEventListener('click', hideCelebration);
    pronounceBtn.addEventListener('click', pronounceWord);
    
    categoryButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        categoryButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentCategory = btn.dataset.category;
        updateLearningTip();
      });
    });
    
    difficultyButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        difficultyButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentDifficulty = btn.dataset.difficulty;
      });
    });
    
    flashcardBtn.addEventListener('click', toggleFlashcardMode);

    // Funci√≥n para comenzar el juego
    function beginGame() {
      startScreen.style.display = 'none';
      startGame();
      
      if (soundOn) {
        const beginSound = document.getElementById('beginSound');
        beginSound.currentTime = 0;
        beginSound.play();
      }
    }

    // Funci√≥n para ir a la p√°gina de inicio
    function goToIndex() {
      alert("Redirigiendo a la p√°gina de inicio...");
      // window.location.href = "index.html";
    }

    // Seleccionar cartas aleatorias seg√∫n la dificultad
    function selectRandomCards() {
      const bank = wordBanks[currentCategory];
      let count = 8; // Por defecto f√°cil
      
      if (currentDifficulty === 'medium') count = 10;
      if (currentDifficulty === 'hard') count = 12;
      
      const shuffled = [...bank].sort(() => 0.5 - Math.random());
      currentCards = shuffled.slice(0, count);
      return [...currentCards, ...currentCards].sort(() => 0.5 - Math.random());
    }
    
    // Crear las cartas del juego
    function createCards() {
      const gameBoard = document.getElementById('memory-game');
      gameBoard.innerHTML = '';
      
      // Ajustar el grid seg√∫n la dificultad
      if (currentDifficulty === 'easy') {
        gameBoard.style.gridTemplateColumns = 'repeat(4, 1fr)';
      } else if (currentDifficulty === 'medium') {
        gameBoard.style.gridTemplateColumns = 'repeat(5, 1fr)';
      } else {
        gameBoard.style.gridTemplateColumns = 'repeat(6, 1fr)';
      }
      
      const gameCards = selectRandomCards();
      
      gameCards.forEach((card, index) => {
        const memoryCard = document.createElement('div');
        memoryCard.classList.add('memory-card');
        memoryCard.dataset.word = card.word;
        memoryCard.dataset.index = index;
        
        memoryCard.innerHTML = `
          <div class="memory-card-inner">
            <div class="back-face">
              <div class="question">?</div>
              <div class="hint-text">Haz clic para revelar</div>
            </div>
            <div class="front-face">
              <div class="word">${card.word}</div>
              <div class="translation">${card.translation}</div>
              <div class="emoji">${card.emoji}</div>
            </div>
          </div>
        `;
        
        memoryCard.addEventListener('click', flipCard);
        gameBoard.appendChild(memoryCard);
      });
      
      updateHints();
      updateProgressBar();
    }

    // Actualizar lista de pistas
    function updateHints() {
      const hintsList = document.getElementById('hints-list');
      hintsList.innerHTML = '';
      
      currentCards.slice(0, currentCards.length/2).forEach(card => {
        const hintItem = document.createElement('div');
        hintItem.classList.add('hint-item');
        hintItem.innerHTML = `<i class="fas fa-info-circle"></i> <strong>${card.word}:</strong> ${card.hint}`;
        hintsList.appendChild(hintItem);
      });
    }

    // Actualizar barra de progreso
    function updateProgressBar() {
      const progress = (pairsMatched / (currentCards.length/2)) * 100;
      progressBar.style.width = `${progress}%`;
    }

    // Actualizar consejo de aprendizaje
    function updateLearningTip() {
      const randomTip = learningTips[Math.floor(Math.random() * learningTips.length)];
      learningTipElement.textContent = randomTip;
    }

    // Pronunciar palabra
    function pronounceWord() {
      if (!currentCards.length) return;
      
      const randomWord = currentCards[Math.floor(Math.random() * currentCards.length)];
      currentWordElement.textContent = randomWord.word;
      
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(randomWord.word);
        utterance.lang = 'en-US';
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
      }
    }

    // Voltear carta
    function flipCard() {
      if (lockBoard || this === firstCard) return;
      
      if (soundOn) {
        document.getElementById('flipSound').currentTime = 0;
        document.getElementById('flipSound').play();
      }
      
      this.classList.add('flip');
      
      if (!hasFlippedCard) {
        hasFlippedCard = true;
        firstCard = this;
        return;
      }
      
      secondCard = this;
      attempts++;
      document.getElementById('attempts').textContent = attempts;
      checkForMatch();
    }
    
    // Comprobar coincidencia
    function checkForMatch() {
      const isMatch = firstCard.dataset.word === secondCard.dataset.word;
      
      if (isMatch) {
        disableCards();
        pairsMatched++;
        
        // Calcular puntuaci√≥n (m√°s puntos por menos intentos)
        const pointsEarned = Math.max(100 - attempts, 10);
        score += pointsEarned;
        
        document.getElementById('pairs').textContent = pairsMatched;
        document.getElementById('score').textContent = score;
        
        if (soundOn) {
          document.getElementById('matchSound').play();
        }
        
        updateProgressBar();
        
        if (pairsMatched === currentCards.length/2) {
          endGame();
        }
      } else {
        unflipCards();
      }
    }

    // Desactivar cartas coincidentes
    function disableCards() {
      setTimeout(() => {
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);
        resetBoard();
      }, 500);
    }

    // Volver a voltear cartas no coincidentes
    function unflipCards() {
      lockBoard = true;
      
      setTimeout(() => {
        firstCard.classList.remove('flip');
        secondCard.classList.remove('flip');
        resetBoard();
      }, 1000);
    }

    // Reiniciar tablero
    function resetBoard() {
      [hasFlippedCard, lockBoard] = [false, false];
      [firstCard, secondCard] = [null, null];
    }

    // Iniciar nuevo juego
    function startGame() {
      resetGameStats();
      createCards();
      startTimer();
      updateLearningTip();
      
      if (soundOn) {
        const startSound = document.getElementById('startSound');
        startSound.currentTime = 0;
        startSound.play();
      }
    }

    // Reiniciar estad√≠sticas
    function resetGameStats() {
      pairsMatched = 0;
      attempts = 0;
      seconds = 0;
      score = 0;
      document.getElementById('pairs').textContent = '0';
      document.getElementById('attempts').textContent = '0';
      document.getElementById('time').textContent = '00:00';
      document.getElementById('score').textContent = '0';
      clearInterval(timer);
      progressBar.style.width = '0%';
    }

    // Iniciar temporizador
    function startTimer() {
      timer = setInterval(() => {
        seconds++;
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = seconds % 60;
        document.getElementById('time').textContent = 
          `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
      }, 1000);
    }

    // Finalizar juego
    function endGame() {
      clearInterval(timer);
      
      // Mostrar estad√≠sticas en pantalla de celebraci√≥n
      document.getElementById('celeb-pairs').textContent = pairsMatched;
      document.getElementById('celeb-attempts').textContent = attempts;
      document.getElementById('celeb-time').textContent = document.getElementById('time').textContent;
      document.getElementById('celeb-score').textContent = score;
      
      if (soundOn) {
        const winSound = document.getElementById('winSound');
        winSound.currentTime = 0;
        winSound.play();
      }
      
      showCelebration();
    }

    // Mostrar celebraci√≥n
    function showCelebration() {
      const celebration = document.getElementById('celebration');
      celebration.classList.remove('hidden');
      celebration.classList.add('flex');
      
      for (let i = 0; i < 100; i++) {
        createConfetti();
      }
    }
    
    // Ocultar celebraci√≥n
    function hideCelebration() {
      const celebration = document.getElementById('celebration');
      celebration.classList.add('hidden');
      celebration.classList.remove('flex');
      celebration.innerHTML = '<h2 class="text-white text-4xl md:text-6xl font-bold mb-8 text-center">¬°Felicidades! üéâ<br>Completaste el juego</h2><div class="celebration-stats bg-white p-6 rounded-2xl shadow-lg mb-8 text-center"><h3 class="text-2xl font-bold text-indigo-800 mb-4">Tu resultado</h3><div class="grid grid-cols-2 gap-4"><div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-check-circle text-green-500"></i> Pares: <span id="celeb-pairs" class="font-bold">8</span>/8</div><div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-redo text-blue-500"></i> Intentos: <span id="celeb-attempts" class="font-bold">0</span></div><div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-clock text-purple-500"></i> Tiempo: <span id="celeb-time" class="font-bold">00:00</span></div><div class="bg-slate-100 p-3 rounded-lg"><i class="fas fa-star text-yellow-500"></i> Puntuaci√≥n: <span id="celeb-score" class="font-bold">0</span></div></div></div><button class="game-btn bg-green-500 text-white text-xl" id="playAgainBtn"><i class="fas fa-play"></i> Jugar de nuevo</button>';
     
      document.getElementById('playAgainBtn').addEventListener('click', hideCelebration);
      startGame();
    }

    // Crear confeti
    function createConfetti() {
      const confetti = document.createElement('div');
      confetti.classList.add('confetti');
      confetti.style.left = Math.random() * 100 + 'vw';
      confetti.style.backgroundColor = getRandomColor();
      confetti.style.width = Math.random() * 10 + 5 + 'px';
      confetti.style.height = Math.random() * 10 + 5 + 'px';
      
      document.getElementById('celebration').appendChild(confetti);
      
      setTimeout(() => {
        confetti.remove();
      }, 5000);
    }

    // Obtener color aleatorio
    function getRandomColor() {
      const colors = ['#f72585', '#4361ee', '#4cc9f0', '#3a0ca3', '#7209b7', '#2ecc71', '#e74c3c', '#ff9800'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    // Mostrar pista
    function showHint() {
      if (soundOn) {
        document.getElementById('hintSound').play();
      }
      
      const unflippedCards = Array.from(document.querySelectorAll('.memory-card:not(.flip)'));
      if (unflippedCards.length > 0) {
        const randomCard = unflippedCards[Math.floor(Math.random() * unflippedCards.length)];
        randomCard.classList.add('flip');
        
        setTimeout(() => {
          randomCard.classList.remove('flip');
        }, 1000);
      }
    }

    // Alternar sonido
    function toggleSound() {
      soundOn = !soundOn;
      soundBtn.innerHTML = soundOn ? '<i class="fas fa-volume-up"></i> Sonido: ON' : '<i class="fas fa-volume-mute"></i> Sonido: OFF';
    }

    // Configurar reconocimiento de voz
    function setupVoiceRecognition() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
          alert('Tu navegador no soporta el reconocimiento de voz.');
          return;
      }
      voiceRecognition = new SpeechRecognition();
      voiceRecognition.lang = 'en-US';
      voiceRecognition.continuous = false;
      voiceRecognition.interimResults = false;

      voiceRecognition.onresult = (event) => {
          const result = event.results[0][0].transcript.trim().toLowerCase();
          const cards = Array.from(document.querySelectorAll('.memory-card:not(.flip)'));
          const targetCard = cards.find(card => card.dataset.word.toLowerCase() === result);
          if (targetCard) {
              flipCard.call(targetCard);
          }
      };

      voiceRecognition.onend = () => {
        if(!lockBoard && pairsMatched < currentCards.length/2) {
            try { voiceRecognition.start(); } catch(e) {}
        }
      };
      voiceBtn.innerHTML = '<i class="fas fa-microphone-slash"></i> Desactivar Voz';
      voiceBtn.removeEventListener('click', setupVoiceRecognition);
      voiceBtn.addEventListener('click', stopVoiceRecognition);
      try { voiceRecognition.start(); } catch(e) {}
    }

    // Detener reconocimiento de voz
    function stopVoiceRecognition() {
      if (voiceRecognition) {
        voiceRecognition.stop();
      }
      voiceBtn.innerHTML = '<i class="fas fa-microphone"></i> Activar Voz';
      voiceBtn.removeEventListener('click', stopVoiceRecognition);
      voiceBtn.addEventListener('click', setupVoiceRecognition);
    }

    // Alternar modo flashcards
    function toggleFlashcardMode() {
      alert("Pr√≥ximamente: Modo Flashcards para practicar vocabulario!");    
    }

    // Inicializar
    updateLearningTip();
  </script>
</body>
</html>
